[English](./README.md) | [繁體中文](./README.zh-TW.md)

---

# BrownDust 2 Android 模組管理器

解包封包不用跑電腦上了。

---

## 功能介紹

*   **自動掃描與分組**: 自動掃描您指定的模組資料夾，並根據模組要修改的遊戲檔案進行智慧分組。
*   **批次安裝**: 您可以一次選擇同一個分組內的多個模組，應用程式會將它們合併處理。
*   **裝置上打包**: 無需連接電腦，直接在您的手機上完成模組的解包、資源轉換 (ASTC) 和重新打包。

## 系統需求

*   Android 11 或更高版本。
*   已安裝《棕色塵埃2》官方最新版本。

## 安裝教學

1.  下載本應用程式的 `.apk` 檔案。
2.  點擊下載的 `.apk` 檔案進行安裝。

## 首次使用設定

在您開始安裝模組前，需要先完成一個授權步驟：

1.  開啟 App，您會看到一個歡迎畫面。
2.  點擊 **「Select Mod Source Folder」** 按鈕。
3.  在跳出的檔案選擇器中，導覽至您存放模組檔案 (例如 `.zip` 壓縮檔或已經解壓縮的資料夾) 的位置，然後點擊 **「使用這個資料夾」**。
    *   *建議：* 您可以在手機儲存空間中建立一個名為 `BD2_Mods` 的資料夾，將所有下載的模組都放在這裡。

## 如何安裝模組

1.  **選擇模組**: 在主畫面的列表中，勾選您想要安裝的一或多個模組。請注意，您只能選擇屬於同一個分組 (Target) 的模組進行批次安裝。
2.  **開始打包**: 點擊右下角的 **打勾 (✓)** 浮動按鈕。
3.  **提供原始檔案**:
    *   App 會跳出一個對話方塊，提示需要提供原始的 `__data` 檔案。
    *   您現在有兩個選項：
        *   **從伺服器下載 (建議)**：點擊此按鈕，App 將會自動從遊戲官方伺服器下載正確的、最新版本的 `__data` 檔案。
        *   **手動選擇檔案**：如果您偏好，您仍然可以手動在您的裝置上找到原始的 `Android/data/com.neowizgames.game.browndust2/files/UnityCache/Shared/[hashed_name]/*/__data` 檔案，將其複製到您的模組資料夾，並使用檔案選擇器來選取它。
4.  **等待處理**: 應用程式會自動在背景執行解包、壓縮和重新打包的過程。請耐心等候。
5.  **手動替換檔案 (目前版本)**:
    *   安裝成功後，一個新的、修改過的 `__data` 檔案會被儲存到您手機的 **`Download` (下載)** 資料夾中，檔名為 `__[hashed_name]`。
    *   **您需要手動將這個檔案複製或移動到遊戲的對應資料夾中，覆蓋掉原始的 `__data` 檔案。**
    *   您可以使用第三方檔案管理器 (需要特殊權限) 來完成此操作。對話框中會提供一鍵複製的 ADB 指令，可以透過 [Shizuku](https://github.com/RikkaApps/Shizuku) 在手機中執行自動替換指令。

## 常見問題

*   **Q: 為什麼 App 沒顯示我的模組？**
    *   A: 請確認您已正確選擇了存放模組的「模組來源資料夾」。同時，請確保您的模組是 `.zip` 格式或已解壓縮的資料夾。

*   **Q: 安裝失敗了怎麼辦？**
    *   A: 最常見的原因是您在步驟 3 中提供了錯誤的原始 `__data` 檔案。請確保您提供的檔案與 App 提示的 `hashed_name` 相符。

*   **Q: 安裝完模組進到遊戲後發現畫面出錯了怎麼辦？**
    *   A: 這很可能是因為模組缺少了 `.skel` 檔案。一個完整的模組需要包含 `.png`、`.atlas` 和 `.skel` 三種檔案才能正常運作。

---

## 致謝

本應用程式的開發離不開以下開源專案和工具的貢獻，特此感謝：

*   **[browndust2-repacker-android](https://codeberg.org/kxdekxde/browndust2-repacker-android)**: 提供重新打包 `__data` 檔案的核心技術，包括 ASTC 紋理壓縮和 LZ4 壓縮的處理方法。
*   **[UnityPy](https://github.com/K0lb3/UnityPy)**: Python 函式庫，是讀取、修改和儲存 Unity 遊戲資產的基礎。
*   **[ARM-software/astc-encoder](https://github.com/ARM-software/astc-encoder)**: ARM 官方提供的 ASTC 紋理編碼器，用於將模組紋理轉換為與遊戲相容的格式。
